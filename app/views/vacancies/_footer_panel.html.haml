- content_for :footer_panel do
  .panel.panel-body
    .row
      .col-xs-12
        .panel.panel-info
          .panel-heading.panel-title
            = 'Работа с кандидатами'
            = link_to 'Добавить кандидатов к этой вакансии', '#', class: 'btn btn-default', id: 'add-to-vacancy'
          .panel-body
            .row
              .col-xs-2
                .btn-group
                  .btn-group-vertical{ data: { toggle: 'buttons-radio' } }
                    = link_to 'Найденные', '#',     class: 'btn btn-default candidates-for-vacancy', data: { status_name: 'Найденные', vacancy_id: @vacancy.id}
                    = link_to 'Отобранные', '#',    class: 'btn btn-default candidates-for-vacancy', data: { status_name: 'Отобранные', vacancy_id: @vacancy.id }
                    = link_to 'Собеседование', '#', class: 'btn btn-default candidates-for-vacancy', data: { status_name: 'Собеседование', vacancy_id: @vacancy.id }
                    = link_to 'Утвержден', '#',     class: 'btn btn-default candidates-for-vacancy', data: { status_name: 'Утвержден', vacancy_id: @vacancy.id }
                    = link_to 'Не подходит', '#',   class: 'btn btn-default candidates-for-vacancy', data: { status_name: 'Не подходит', vacancy_id: @vacancy.id }
                    = link_to 'Отказался', '#',     class: 'btn btn-default candidates-for-vacancy', data: { status_name: 'Отказался', vacancy_id: @vacancy.id }
              .col-xs-10
                .panel-body
                  %table.table.table-bordered.table-hover#vacancy-candidates
                    %caption Кандидаты со статусом "Найденные"
                    %thead
                      %tr
                        %th №
                        %th Полное имя
                        %th Желаемая зарплата
                        %th Добавлен
                        %th Перевести в статус
                    %tbody
                      - @candidates_with_found_status.each do |candidate|
                        %tr
                          %th= candidate.id
                          %td= candidate.name
                          %td= desired_salary_for(candidate)
                          %td= candidate.created_at
                          %td= select_tag(:applied_status, options_for_select(StaffRelation::STATUSES, candidate.status_for_vacancy(@vacancy)), class: 'status-picker', data: { vacancyid: @vacancy.id, candidateid: candidate.id }, :include_blank => 'Перевести в статус' )

.modal.fade#myModal
  .modal-dialog.modal-lg
    .modal-content
      .modal-header
        %button.close{ "aria-label" => "close", "data-dismiss" => "modal", type:'button' }
          %span{ "aria-hidden" => true }
            &times;
        %h4.modal-title Кандидаты
      .modal-body
        #candidates-multiselect{data: { vacancyid: @vacancy.id } }
          .panel.panel-primary
            %table.table.table-bordered
              %thead.td-primary
                %tr
                  %th id
                  %th Имя
                  %th Зарплата
                  %th Примечание
              %tbody
                - @all_candidates.each do |candidate|
                  %tr
                    %td= candidate.id
                    %td
                      = check_box_tag 'mark-as-found-candidate', candidate.id
                      = candidate.name
                    %td= candidate.salary
                    %td
                      - if @candidates_status_for_vacancy.include? candidate
                        - c = @candidates_status_for_vacancy.find candidate
                        = "Имеет статус \"#{c.st_status}\" для вакансии \"#{c.v_name}\""
                      - else
                        Нейтрален
      .modal-footer
        %button.btn.btn-default{ type: 'button', "data-dismiss" => "modal" } Отменить
        %button.btn.btn-primary#btn-apply{ type: 'button' } Выбрать