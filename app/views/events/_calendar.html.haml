= link_to 'Создать новое событие', new_event_path, remote: true, class: 'btn btn-success pull-right'
.new_event

= render 'dialog'

= month_calendar events: events, table: { class: 'table table-bordered' },
                                 tr: { class: 'calendar-row' },
                                 td: default_td_classes(events),
                                 day_names: 'date.day_names' do |date, events|
  = date.day
  %a.event-badge{ href: '#', 'data-target' => "#myModal#{date}", 'data-toggle' => 'modal' }= events.count if !events.empty?

  / Modal
  .events-list.modal.fade{ 'aria-labelledby' => 'myModalLabel', role: 'dialog', tabindex: '-1', id: "myModal#{date}" }
    .modal-dialog{ role: 'document' }
      .modal-content
        .modal-header
          %button.close{ 'aria-label' => 'Close', 'data-dismiss' => 'modal', type: 'button' }
            %span{ 'aria-hidden' => 'true' } ×
          %h4#myModalLabel.modal-title= date.strftime('События на %m/%d/%Y')
        .modal-body
          .panel.panel-primary
            %table.table.table-bordered
              %thead
                %tr
                  %th Событие
                  %th На вакансию
                  %th С кем
                  %th Назначено на
                  %th Действия
              %tbody
                - events.each do |event|
                  %tr
                    %td
                      %span.label.label-default Интервью
                    %td Рубист
                    %td Петров Пётр
                    %td
                      %span.label.label-primary= event.starts_at.strftime('%H:%M')
                      = event.starts_at.strftime('%d/%m/%Y')
                    %td
                      = link_to '', edit_event_path(event), class: 'glyphicon glyphicon-edit', remote: true
                      = link_to '', event, method: :delete, data: { confirm: 'Вы уверены?' }, class: 'glyphicon glyphicon-remove'